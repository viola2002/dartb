# Fourth Study Week

- 30강: [계층](#30-계층)

- 31강: [집합](#31-집합)

- 32강: [결합집합](#32-결합집합)

- 33강: [계산된 필드](#33-계산된-필드)

- 34강: [행수준계산](#34-행수준계산)

- 35강: [집계계산](#35-집계계산)

- 36강: [테이블계산](#36-테이블계산)

- 37강: [퀵테이블계산(1)](#37-퀵테이블계산1)

- 38강: [퀵테이블계산(2)](#38-퀵테이블계산2)

- [문제1](#문제-1)

- [문제2](#문제-2)

- [문제3](#문제-3)

## Study Schedule

| 강의 범위     | 강의 이수 여부 | 링크                                                                                                        |
|--------------|---------|-----------------------------------------------------------------------------------------------------------|
| 1~9강        |  ✅      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=84)       |
| 10~19강      | ✅      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=75)       |
| 20~29강      | ✅      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=65)       |
| 30~38강      | ✅      | [링크](https://youtu.be/e6J0Ljd6h44?si=nhGbB7GsdOCqj15f)       |
| 39~49강      | 🍽️      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=45)       |
| 50~59강      | 🍽️      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=35)       |
| 60~69강      | 🍽️      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=25)       |
| 70~79강      | 🍽️      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=15)       |
| 80~89강      | 🍽️      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=5)        |

<!-- 여기까진 그대로 둬 주세요-->

> **🧞‍♀️ 오늘의 스터디는 지니와 함께합니다.**


## 30. 계층

<!-- 계층 구조와 관련된 개념, 사용 방법 등을 적어주세요. -->

**개념**
- 계층: 뷰에서 데이터를 *Drill Down*하여 <ins>값을 세부적으로 찾을 때</ins> 유용한 방법
    - tableau에서 *날짜 데이터*에 자동으로 계층 생성

**사용 방법**
- 날짜별 매출
    1. `매출` 필드를 `마크` 카드의 `텍스트`로 드래그
    1. `배송 날짜` 필드를 행 선반으로 드래그
    1. 행 선반에 올라간 필드 왼쪽 `+` 모양 아이콘을 클릭하여 *Drill Down*
- 계층 만들기
    1. `Ctrl`로 두 필드를 선택한 후 우클릭
    1. `계층`에서 `계층 만들기` 클릭
    1. 계층 이름 입력
    1. 나머지 필드들은 계층으로 드래그
    1. 드래그를 이용하여 순서 변경

## 31. 집합

<!-- 집합의 정의 및 활용 방법에 대해 알게 된 점을 적어주세요. -->

**정의**
- 집합: 사용자가 *직접* 어떤 조건을 설정하고 그 <ins>조건을 기반으로 데이터들을 구분</ins>하는 방법
    - `일반` 탭: *그룹* 기능과 비슷하게 <ins>수동으로</ins> 데이터를 선택해 묶을 수 있음
    - `조건` 탭: <ins>사용자가 설정한 조건</ins>이 충족되면 데이터들을 묶음
    - `상위` 탭: <ins>필드 기준별로 상위 또는 하위</ins> 순서로 데이터들을 묶음

**활용 방법**
- 수익을 많이 낸 상위 10개 도시
    1. `위치` 계층의 `시/도` 필드를 행 선반으로 드래그
    1. `수익` 필드를 `마크` 카드의 `텍스트`로 드래그
    1. `시/도` 필드 우클릭
    1. `만들기`에서 `집합` 클릭
    1. 집합 이름 입력
    1. `상위` 탭에서 `필드 기준`을 상위로 선택
    1. 자동으로 `수익` 필드가 선택됨
    1. 만들어진 집합 필드를 `마크` 카드의 `색상`으로 드래그

- 색상 변경
    1. 오른쪽 범례 우클릭
    1. 범례 선택 후 색상 지정

## 32. 결합집합

<!-- 결합집합의 개념 및 사용 사례를 적어주세요. -->

**개념**
- 결합된 집합
    - 기본적으로 집합을 만들 때는 하나의 조건을 설정할 수 있음
    - 두 가지의 조건을 적용하기 위해 사용

**사용 사례**
- 매출이 5만 원 이상이고 수익률이 10% 이상인 도시의 데이터 구분
    1. 매출이 5만 원 이상인 도시를 구분하는 집합 필드
        1. `시/도` 필드 우클릭
        1. `만들기`에서 `집합` 클릭
        1. `조건` 탭에서 `필드 기준`에 `매출` 필드 선택
        1. `>=`(이상) 선택 후 "50,000" 입력
        1. 집합 이름 입력
    1. 수익률이 10% 이상인 도시를 구분하는 집합 필드
        1. `시/도` 필드 우클릭
        1. `만들기`에서 `집합` 클릭
        1. (계산된 필드 `수익률` 만들기)
        1. `조건` 탭에서 `필드 기준`에 `수익률` 필드 선택
        1. `>=`(이상) 선택 후 "0.1" 입력
        1. 집합 이름 입력
    1. 집합 필드 결합
        1. 집합 필드 모두 선택 후 우클릭
        1. `결합된 집합 만들기` 클릭
        1. 옵션 네 가지 중 `두 집합의 공유 멤버` 선택
        1. 집합 이름 입력

## 33. 계산된 필드

<!-- 계산된 필드를 사용하는 방법과 예시를 적어주세요. -->

**사용하는 방법**
- 데이터 패널
    1. 데이터 패널 (검색창 우측 끝) `▼` 모양 아이콘 클릭
    1. `계산된 필드 만들기` 클릭
- 분석 탭
    1. 상단 `분석` 탭 클릭
    1. `계산된 필드 만들기` 클릭
- 사용하고자 하는 필드
    1. 필드 우클릭
    1. `만들기`에서 `계산된 필드` 클릭

- 입력창
    - 상단에서 계산된 필드의 이름 입력
    - 하단 공간에서 필요한 계산식 작성
    - 오른쪽 `▶` 모양 아이콘을 클릭하여 함수에 대한 정보 확인
    - 필드 입력: 대괄호(`[]`) 안에 작성
        - 필드를 계산식으로 드래그 & 드롭
        - 계산식에서 필드 이름 입력 후 선택
    - 문자 값 입력: 작은따옴표(`''`) 안에 작성
    - 주석: `//` 입력 후 작성

**예시**
- 제품별 수익 백분율
    1. 위에서 언급한 세 가지 방법 중 하나로 입력창 띄우기
    1. 계산된 필드 이름에 "수익률 (%)" 입력
    1. (전체 수익 합계) ÷ (전체 매출 합계) = `SUM([수익]) / SUM([매출])`
    1. 만들어진 `수익률 (%)` 필드 우클릭
    1. `기본 속성`에서 `숫자 형식` 클릭
    1. `백분율`을 선택해 변경
    1. `제품 이름` 필드를 행 선반으로 드래그
    1. `수익률 (%)` 필드를 `마크` 카드의 `텍스트`로 드래그
```
※ 행 수준 계산과 집계 계산이 있으나, 지금 실습에서는 집계 함수를 사용하지 않으며 행 수준으로 계산되기에 해당 값이 정확하지 않을 수 있음
```

## 34. 행수준계산

<!-- 행수준 계산의 의미와 적용 방법을 적어주세요. -->

**계산된 필드의 종류**
- 기본 계산
    - 데이터 원본에 대한 행 수준 계산
        - <ins>데이터의 각 레코드를 통해 계산하는 방식</ins>
        - 행 수준 계산으로 만든 `수익률` 필드 = 수익을 매출로 나눈 항목별 레코드를 전부 합계
    - 데이터 원본에 대한 집계 계산
        - <ins>현재 뷰에서 보이는 기준으로 계산하는 방식</ins>
        - 집계 계산으로 만든 `수익률` 필드 = `SUM()` 함수를 사용해서 전체 수익 합계를 전체 매출 합계로 나눔
- 테이블 계산
- LOD 표현식

**적용 방법**
- `고객 이름` 필드에서 성과 이름 분리
    1. 데이터 패널의 `계산된 필드 만들기` 클릭
    1. 필드 이름 "고객 이름 (분리)" 입력
    1. 계산식에서 `SPLIT([고객 이름], ' ', 1)` 작성
    1. 데이터 패널의 `계산된 필드 만들기` 클릭
    1. 필드 이름 "고객 성 (분리)" 입력
    1. 계산식에서 `SPLIT([고객 이름], ' ', 2)` 작성
```
해당 항목의 행에서 값을 가져와 새로운 데이터 값을 계산
```

- 수익성이 있는 제품 확인
    1. `제품 이름` 필드를 행 선반으로 드래그
    1. `수익` 필드를 `마크` 카드의 `텍스트`로 드래그
    1. `계산된 필드 만들기`에서 필드 이름을 "수익성"으로 입력
    1. 계산식에 `IF [수익] > 0 THEN '수익성 있음'(\n)ELSEIF [수익] < 0 THEN '수익성 없음'(\n)ELSE '손익 평형'(\n)END` 작성
    1. 만들어진 `수익성` 필드를 행 선반으로 드래그

- 주문한 날짜로부터 주문이 배송된 날까지 일 수
    1. `계산된 필드 만들기`에서 필드 이름을 "주문 처리 일수"로 입력
    1. 계산식에 `DATEDIFF('day', [주문 날짜], [배송 날짜])` 작성
    1. `주문 Id` 필드, `주문 날짜` 필드, `배송 날짜` 필드를 행 선반으로 드래그
    1. `주문 날짜` 필드 우클릭
    1. 불연속형 `더 보기`에서 `사용자 지정` 클릭
    1. `세부 정보`에서 `연도/월/일` 선택
    1. `배송 날짜` 필드도 동일하게 변경
    1. `주문 처리 일수` 필드를 `마크` 카드의 `텍스트`로 드래그
```
`주문 Id`마다 `주문 처리 일수`를 나타내지만, 여러 개의 제품 레코드를 가진 `주문 Id`가 있음
그래서 일 수를 전부 합계했기 때문에 중복을 피하려면 `주문 처리 일수`를 측정값에서 차원으로 바꿔야 함
```

## 35. 집계계산

<!-- 집계계산의 정의 및 활용 사례에 대해 알게 된 점을 적어주세요. -->

**계산된 필드의 종류**
- 기본 계산
    - 데이터 원본에 대한 행 수준 계산
        - <ins>데이터의 각 레코드를 통해 계산하는 방식</ins>
        - 행 수준 계산으로 만든 `수익률` 필드 = 수익을 매출로 나눈 항목별 레코드를 전부 합계
    - 데이터 원본에 대한 집계 계산
        - <ins>현재 뷰에서 보이는 기준으로 계산하는 방식</ins>
        - 집계 계산으로 만든 `수익률` 필드 = `SUM()` 함수를 사용해서 전체 수익 합계를 전체 매출 합계로 나눔
        - *tableau는 뷰에서 필드 레벨에 따라 해당 레벨에 관련된 레코드를 통해 계산하여 원하는 값을 반환함*
        - `계산된 필드 만들기`에서 `집계` 함수 사용
- 테이블 계산
- LOD 표현식

**활용  사례**
- 합계 매출 집계 계산
    1. `계산된 필드 만들기`에서 필드 이름을 "합계 매출 집계 계산"으로 입력
    1. 계산식에 `SUM([매출])` 작성
    1. (`제조업체` 필드 만들기 - `제품 이름` 필드에서 시작 문자 이용)
    1. `제조업체` 필드를 행 선반으로 드래그
    1. `매출` 필드와 `합계 매출 집계 계산` 필드 각각 더블클릭
```
사용자가 집계 계산 필드를 만들면, 해당 필드에 "집계"로 나타나고 우클릭해도 집계 옵션(`측정값` 옵션)이 나타나지 않음
```

- 연도별 주문 건수
    1. `계산된 필드 만들기`에서 필드 이름을 "고유 주문 건수"로 입력
    1. 계산식에 `COUNTD([주문 Id])` 작성 (고유 항목)
    1. `고유 주문 건수` 필드를 행 선반으로 `주문 날짜` 필드를 열 선반으로 드래그
    1. 특정 연도 우클릭
    1. `데이터 보기` 클릭

## 36. 테이블계산

<!-- 테이블 계산의 개념 및 사용 방법을 적어주세요. -->

**계산된 필드의 종류**
- 기본 계산
    - 데이터 원본에 대한 행 수준 계산
        - <ins>데이터의 각 레코드를 통해 계산하는 방식</ins>
        - 행 수준 계산으로 만든 `수익률` 필드 = 수익을 매출로 나눈 항목별 레코드를 전부 합계
    - 데이터 원본에 대한 집계 계산
        - <ins>현재 뷰에서 보이는 기준으로 계산하는 방식</ins>
        - 집계 계산으로 만든 `수익률` 필드 = `SUM()` 함수를 사용해서 전체 수익 합계를 전체 매출 합계로 나눔
        - *tableau는 뷰에서 필드 레벨에 따라 해당 레벨에 관련된 레코드를 통해 계산하여 원하는 값을 반환함*
        - `계산된 필드 만들기`에서 `집계` 함수 사용
- 테이블 계산
    - <ins>뷰에 보이는 내용을 바탕으로 계산</ins>
    - `계산된 필드 만들기`에서 `테이블 계산` 함수 사용
    - tableau에서 자동으로 계산 방향을 `테이블(옆으로)`로 설정
- LOD 표현식

**사용 방법**
- 월마다 연도별 누적 매출 계산
    1. `주문 날짜` 필드와 `매출` 필드를 더블클릭
    1. `주문 날짜` 필드를 행 선반으로 드래그
    1. 행 선반에서 분기와 월만 사용
    1. `계산된 필드 만들기`에서 필드 이름을 "누적 매출"로 입력
    1. 계산식에 `RUNNING_SUM(SUM([매출]))` 작성
    1. 만들어진 `누적 매출` 필드를 `마크` 카드의 `텍스트`로 드래그
    1. 뷰에서 누계된 매출 확인
```
마크 선반에 올라간 `누적 매출` 필드의 `△` 모양 아이콘은 테이블 계산을 의미함
```

- 현재 달과 직전 달의 매출 차이
    1. `주문 날짜` 필드를 행 선반으로 드래그
    1. 행 선반에서 연도와 월만 사용
    1. `매출` 필드 더블클릭
    1. 계산식에 `SUM([매출])-LOOKUP(SUM([매출]), -1)` 작성
    1. 만들어진 필드 더블클릭
    1. 뷰에서 누계된 매출 확인

- 계산 방향 바꾸기
    - 첫 번째 방법
        1. 선반 위 해당 필드 우클릭
        1. `다음을 사용하여 계산`에서 바꾸고자 하는 계산 방향 선택
    - 두 번째 방법
        1. 선반 위 해당 필드 우클릭
        1. `테이블 계산 편집` 클릭
        1. 계산 방향 선택 및 계산 옵션 추가
        - 옵션을 변경할 때마다 tableau에서 하이라이트를 통해 범위 안내
        - `정렬 순서`에서 `사용자 지정 정렬`을 선택해 원하는 정렬 기준 설정 가능

## 37. 퀵테이블계산(1)

<!-- 퀵테이블 계산의 원리 및 예제에 대해 알게 된 점을 적어주세요. -->

**원리**
- 퀵 테이블 계산: <ins>가장 자주 쓰이는 테이블 계산 유형</ins>들을 클릭만으로 가능하도록 만들어 놓은 기능
    - 누계: 집계한 값을, <ins>누적한 값</ins>으로 한 번 더 집계
    - 차이: 측정값과 기준값이 <ins>어느 정도 차이가 나는지</ins> 계산
        - 기준값 설정: `이전`이 기본값이며 `이전`, `다음`, `첫 번째`, `지난`으로 총 4가지 옵션 지정 가능
    - 비율 차이: 측정값들 사이의 <ins>성장률 또는 % 차이</ins>를 표현
    - 구성 비율: 전체에서 <ins> 각 항목의 비중</ins>을 확인할 때 활용
    - 백분위수: 전체에서 <ins>각 멤버들의 백분위 표시</ins>
```
퀵 테이블 계산이 적용된 필드를 더블클릭하면 적용된 함수를 확인할 수 있음
```

**예제**
- 사용 방법
    1. 선반 위 연속형 필드 우클릭
    1. `퀵 테이블 계산` 클릭
    1. 관련 테이블 계산 유형 선택

- 분기별 누적 매출 & 월별 매출 차트
    1. `주문 날짜` 필드를 우클릭한 채로 열 선반으로 드래그
    1. `필드 놓기` 창에서 연속형 분기 더블클릭
    1. `매출` 필드를 행 선반으로 드래그
    1. 행 선반 위 `매출` 필드 복제
    1. 복제한 필드 우클릭
    1. `퀵 테이블 계산`에서 `누계` 클릭
    1. 누계 부분 축 우클릭 후 `이중 축` 클릭
    1. 축 우클릭 후 `축 동기화` 클릭

- 각 제품에 대한 연도별 매출 차이
    1. `주문 날짜` 필드를 열 선반으로, `범주` 필드를 행 선반으로 드래그
    1. `매출` 필드를 `마크` 카드의 `텍스트`로 드래그
    1. `마크` 위 `합계(매출)` 필드 우클릭
    1. `퀵 테이블 계산`에서 `차이` 클릭

- 월별 수익 퍼센트 차이
    1. `주문 날짜` 필드를 우클릭한 채로 열 선반으로 드래그
    1. `필드 놓기` 창에서 연속형 월 더블클릭
    1. `수익` 필드를 행 선반으로 드래그
    1. `수익` 필드의 `▼` 모양 아이콘 클릭
    1. `퀵 테이블 계산`에서 `비율 차이` 클릭
    1. `마크`에서 `막대`로 변경
    1. 행 선반 위 `수익` 필드를 `마크` 카드의 `색상`으로 복제
    1. 오른쪽 색상 범례 더블클릭
    1. `단계별 색상`을 체크하고 2단계로 설정

- 지역별 제품 매출 순위와 구성 비율
    1. `지역` 필드와 `범주` 필드를 행 선반으로 드래그
    1. `매출` 필드 더블클릭
    1. 마크 선반에 있는 `매출` 필드의 `▼` 모양 아이콘 클릭
    1. `퀵 테이블 계산`에서 `순위` 클릭
    1. 마크 선반에 있는 `매출` 필드의 `▼` 모양 아이콘 클릭
    1. `다음을 사용하여 계산`에서 `패널(옆에서 아래로)` 클릭
    1. `매출` 필드 더블클릭
    1. 측정값 선반에서 퀵 테이블 계산이 적용되지 않은 `매출` 필드의 `▼` 모양 아이콘 클릭
    1. `퀵 테이블 계산`에서 `구성 비율` 클릭
    1. 측정값 선반에서 구성 비율 퀵 테이블 계산이 적용된 `매출` 필드의 `▼` 모양 아이콘 클릭
    1. `다음을 사용하여 계산`에서 `패널(아래로)` 클릭

- 매출이 많은 고객과 적은 고객
    1. `고객 이름` 필드를 행 선반으로 드래그
    1. `매출` 필드 더블클릭
    1. 마크 선반에 있는 `매출` 필드 우클릭
    1. `퀵 테이블 계산`에서 `백분위수` 클릭
    1. 상단 툴바에서 내림차순 정렬 또는 오름차순 정렬

## 38. 퀵테이블계산(2)

<!-- 이동평균, YTD 총계, 전년 대비 성장률, YTD 성장률 등 본 강의에서 알게 된 점을 적어주세요. -->

**원리**
- 퀵 테이블 계산: <ins>가장 자주 쓰이는 테이블 계산 유형</ins>들을 클릭만으로 가능하도록 만들어 놓은 기능
    - 이동 평균: <ins>이전의 값부터 현재까지 값에 대한 평균</ins>을 낼 때 사용
    - YTD 총계: 특정 시점을 기준으로 <ins>해당 연도부터 그 시점까지 총계</ins>
        - 기본적으로 *누계*와 같은 개념이지만 *연도*보다 하위 필드인 *분기* 또는 *월*이 있어야 함
    - 전년 대비 성장률: <ins>같은 월을 기준으로 이전 연도 대비 얼마나 성장</ins>했는지 살펴보는 데 활용
```
퀵 테이블 계산이 적용된 필드를 더블클릭하면 적용된 함수를 확인할 수 있음
```

**예제**
- 사용 방법
    1. 선반 위 연속형 필드 우클릭
    1. `퀵 테이블 계산` 클릭
    1. 관련 테이블 계산 유형 선택

- 이동 평균
    1. `주문 날짜` 필드를 우클릭한 채로 열 선반으로 드래그
    1. 연속형 분기 선택
    1. `매출` 필드를 행 선반으로 드래그
    1. 행 선반 위 `매출` 필드 복제
    1. 복제한 필드 우클릭
    1. `퀵 테이블 계산`에서 `이동 평균` 클릭
    1. 행 선반 위 각 필드를 각각에 해당하는 `마크` 카드의 `레이블`로 드래그
    1. 이동 평균 `매출` 필드 우클릭 후 `테이블 계산 편집` 클릭
    1. 이전 N분기 및 다음 M분기의 평균 확인
    1. 누계 부분 축 우클릭 후 `이중 축` 클릭
    1. 축 우클릭 후 `축 동기화` 클릭
    1. 색상 범례 더블클릭 후 색상 편집
    1. 각 `마크` 카드의 `레이블` 색상 편집 (`마크` -> `레이블` -> `글꼴` -> `마크 색상 일치`)

- YTD 총계
    1. `주문 날짜` 필드를 행 선반으로 드래그
    1. 행 선반에서 연도와 월만 사용
    1. `매출` 필드 더블클릭
    1. 마크 선반 위 `매출` 필드 우클릭
    1. `퀵 테이블 계산`에서 `YTD 총계` 클릭
    1. `매출` 필드 더블클릭

- 통합 성장률
    1. `주문 날짜` 필드를 행 선반으로 드래그
    1. 행 선반에서 연도와 분기만 사용
    1. `매출` 필드 더블클릭
    1. 마크 선반 위 `매출` 필드 우클릭
    1. `퀵 테이블 계산`에서 `통합 성장률` 클릭

- 전년 대비 성장률
    1. `주문 날짜` 필드를 행 선반으로 드래그
    1. 행 선반에서 연도와 월만 사용
    1. `매출` 필드 더블클릭
    1. 마크 선반 위 `매출` 필드 우클릭
    1. `퀵 테이블 계산`에서 `전년 대비 성장률` 클릭

- YTD 성장률
    1. `주문 날짜` 필드를 행 선반으로 드래그
    1. 행 선반에서 연도와 월만 사용
    1. `매출` 필드 더블클릭
    1. 마크 선반 위 `매출` 필드 우클릭
    1. `퀵 테이블 계산`에서 `YTD 성장율` 클릭
    1. `매출` 필드 더블클릭
    1. 측정값 선반에 있는 퀵 테이블 계산이 적용된 `매출` 필드 더블클릭
    1. 에러 발생 <- 단일 계산식이 아니기 때문
    1. 측정값 선반에 있는 퀵 테이블 계산이 적용된 `매출` 필드를 `Ctrl`을 누른 채 데이터 패널로 이동
    1. 성장률 안에 총계가 숨어있기 때문에 계산 필드 2개로 분리
    1. `계산1` 필드는 "YTD 총계"로, `계산1 1` 필드는 "YTD 성장률"로 수정
    1. `YTD 총계` 필드를 측정값 선반 가운데로 드래그

## 문제 1.

규석이는 이제껏 매출을 올리는 데에 힘썼었지만, 왠지 모르게 주머니에 들어오는 돈이 없어 속상합니다.

그래서 매출이 상위 20곳에 속하지만, 수익률(%)이 마이너스인 시/도를 확인하려고 합니다.

> 수익률은 SUM([수익]) / SUM([매출])로 정의합니다.

어떤 집합을 만들었고, 어떤 결합을 하였는지를 중심으로 기술하고, 결과 자료를 첨부해주세요.

(텍스트 표 형태이며, 색상으로 위 집합을 구분할 수 있게 만들어주세요.)

<!-- 아래 예시 이미지를 삭제하고, 직접 만든 시트 사진을 올려주세요. 시트의 이름은 본인 이름으로 기입해주세요-->

```
1. 매출이 상위 20인 시/도를 구분하는 집합 필드
    1-1. `시/도` 필드 우클릭
    1-2. `만들기`에서 `집합` 클릭
    1-3. `상위` 탭에서 `필드 기준`에 "20"으로 수정 및 `매출` 필드 선택
    1-4. 집합 이름 "매출 상위 20 시/도" 입력
2. 수익률이 마이너스인 시/도를 구분하는 집합 필드
    2-1. 계산된 필드 `수익률(%)` 만들기
        2-1-1. 데이터 패널의 `계산된 필드 만들기` 클릭
        2-1-2. 필드 이름 "수익률(%)" 입력
        2-1-3. 계산식에서 `SUM([수익]) / SUM([매출])` 작성
    2-2. `시/도` 필드 우클릭
    2-3. `만들기`에서 `집합` 클릭
    2-4. `조건` 탭에서 `필드 기준`에 `수익률(%)` 필드 선택
    2-5. `<`(미만) 선택 후 "0" 입력
    2-6. 집합 이름 "수익률 마이너스 시/도" 입력
3. 집합 필드 결합
    3-1. `매출 상위 20 시/도` 필드와 `수익률 마이너스 시/도` 선택 후 우클릭
    3-2. `결합된 집합 만들기` 클릭
    3-3. `두 집합의 공유 멤버` 클릭
    3-4. 집합 이름 "매출 상위 20 & 수익률 마이너스 시/도" 입력
4. 텍스트 표
    4-1. `시/도` 필드 더블클릭
    4-2. `합계` 필드, `수익` 필드, `수익률(%)` 필드 더블클릭
    4-3. `매출` 필드 내림차순 정렬
    4-4. `매출 상위 20 & 수익률 마이너스 시/도` 필드를 `마크` 카드의 `색상`으로 드래그
    4-5. 오른쪽 색상 범례 더블클릭 후 색상 수정
```
<p align="center">
<img src="https://github.com/viola2002/dartb/blob/main/assignment/2024_Autumn/tableau/screenshots/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202024-10-08%20220425.png">
</p>

## 문제 2.
선희는 주문 Id별로 주문에서 배송까지에 걸리는 날짜 일수가 궁금했습니다.
그래서 주문 ID별로 주문에서 배송까지 걸리는 일자를 '배송까지 걸린 일수'라는 계산된 필드로 만들고, 이를 마크에 올린 후 확인해보았습니다.
이때, 계산된 필드의 식은 'DATEDIFF' 함수를 이용하였습니다.

배송까지 걸린 일수 계산을 위한 DATEDIFF 함수 수식을 적어주세요.

```
DATEDIFF('day', [주문 날짜], [배송 날짜])
```

![datediff](https://github.com/yousrchive/BUSINESS-INTELLIGENCE-TABLEAU/blob/main/study/img/4th%20til/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202024-09-30%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%203.47.21.png?raw=true)

그런데 위 그림처럼 '주문 날짜'와 '배송 날짜'를 함께 행에 올려 확인해보니, 주문날짜와 배송날짜의 차이가 '배송까지 걸린 일수'와 다릅니다.

ID-2021-11126을 보니, 11월 26일 배송에 11월 30일 배송이면 4일 차이인데, 12일이 걸렸다고 하네요. 왜 이런 문제가 생긴걸까요?

```
여러 개의 제품 레코드를 가진 `주문 Id`가 있어서 일수를 전부 합계했기 때문이다.
```

그리고 이를 해결하기 위해서는 어떻게 해야 할까요?

```
`배송까지 걸린 일수`를 측정값에서 차원으로 바꾸고 다시 적용해야 한다.
```


## 문제 3.

다음은 Tableau의 다양한 계산을 사용할 수 있는 경우를 빈칸으로 두고 문제를 작성한 것입니다. 각 빈칸에 적합한 계산 유형을 채워보세요.

보기
> **누계, 차이, 비율 차이, 구성 비율, 순위, 백분위수, 이동 평균, YTD 총계, 통합 성장률, 전년 대비 성장률, YTD 성장률**

| 계산 유형               | 설명                                                                 | 사용 예시                                                                                          |
|-------------------------|----------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| 누계           | 데이터의 누적 합계를 계산                                             | 한 기업이 월별 매출 데이터를 누적하여 연간 매출 추이를 보고 싶을 때 사용                                      |
| 차이            | 연속 데이터 포인트 간의 차이를 계산                                    | 한 기업이 월별 매출 데이터에서 전월 대비 매출 증감량을 분석하고 싶은 경우                                        |
| 비율 차이            | 연속 데이터 포인트 간의 비율 변화를 계산                               | 한 기업이 월별 매출 데이터에서 전월 대비 매출 증감률(%)을 분석하고 싶은 경우                                      |
| 구성 비율            | 전체에서 각 데이터 포인트의 비율을 계산                                | 한 기업이 전체 매출에서 각 제품군이 차지하는 비율을 보고 싶을 때 사용                                           |
| 순위            | 데이터의 순위를 매깁니다                                              | 한 기업이 제품별 매출 데이터를 순위별로 정렬하여 상위 10개 제품을 분석하고 싶은 경우                              |
| 백분위수            | 데이터의 백분위를 계산                                               | 한 기업이 고객별 구매 금액 데이터를 백분위수로 나누어 상위 25% 고객을 분석하고 싶은 경우                          |
| 이동 평균            | 일정 기간의 평균을 계산                                               | 한 기업이 주간 매출 데이터에서 4주 이동 평균을 계산하여 트렌드를 분석하고 싶은 경우                              |
| YTD 총계            | 연초부터 현재까지의 총계를 계산                                      | 한 기업이 월별 매출 데이터를 연초부터 현재까지 누적하여 연간 매출 목표 달성 여부를 분석하고 싶은 경우             |
| 통합 성장률            | 일정 기간 동안의 연평균 성장률을 계산                                  | 한 기업이 5년 간 매출 데이터를 바탕으로 연평균 성장률(CAGR)을 계산하고 싶은 경우                                  |
| 전년 대비 성장률            | 전년 동기간 대비 성장률을 계산                                        | 한 기업이 월별 매출 데이터에서 전년 동월 대비 매출 성장률을 분석하고 싶은 경우                                    |
| YTD 성장률            | 연초부터 현재까지의 성장률을 계산                                     | 한 기업이 올해 연초부터 현재까지의 매출이 전년 동기 대비 얼마나 성장했는지 분석하고 싶은 경우                     |

> 사용 예시를 참고하여 실제 경우처럼 생각하며 고민해보아요!