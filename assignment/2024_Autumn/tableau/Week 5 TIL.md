# Fifth Study Week

- 39강: [LOD](#39강-lod)

- 40강: [EXCLUDE](#40-lod-exclude)

- 41강: [INCLUDE](#41-lod-include)

- 42강 : [매개변수](#42-매개변수)

- 43강 : [매개변수 실습](#43-매개변수-실습)
![링크](https://youtu.be/GJvB8hBqeE8?si=3jIj1iymZHZ7mBam)

- 44강: [매개변수 실습](#44-매개변수-실습)

- 45강: [마크카드](#45-워크시트-마크카드)

- 46강: [서식계층](#46-서식-계층)

- 47강: [워크시트](#47-워크시트-서식)

- [문제1](#문제-1)

- [문제2](#문제-2)

## Study Schedule

| 강의 범위     | 강의 이수 여부 | 링크                                                                                                        |
|--------------|---------|-----------------------------------------------------------------------------------------------------------|
| 1~9강        |  ✅      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=84)       |
| 10~19강      | ✅      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=75)       |
| 20~29강      | ✅      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=65)       |
| 30~38강      | ✅      | [링크](https://www.youtube.com/watch?v=e6J0Ljd6h44&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=55)       |
| 39~47강      | ✅      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=45)       |
| 48~59강      | 🍽️      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=35)       |
| 60~69강      | 🍽️      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=25)       |
| 70~79강      | 🍽️      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=15)       |
| 80~89강      | 🍽️      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=5)        |


<!-- 여기까진 그대로 둬 주세요-->

> **🧞‍♀️ 오늘의 스터디는 지니와 함께합니다.**


## 39강. LOD

<!-- INCLUDE, EXCLUDE, FIXED 등 본 강의에서 알게 된 LOD 표현식에 대해 알게 된 점을 적어주세요. -->

**이론**
- LOD(Level Of Detail): 뷰의 세부 수준
    - INCLUDE
    - EXCLUDE
    - FIXED: 현재 뷰에 있는 차원과 상관없이 <ins>계산된 필드에서 원하는 차원</ins>을 따라 계산

**예시**
- FIXED에서 설정한 차원이 <ins>뷰에 포함되어 있을 때</ins>
    1. `매출` 필드를 마크 카드의 `텍스트`로, `지역` 필드를 행 선반으로 드래그
    1. 행 선반에서 `국가/지역` 필드 수준까지 펼침
    1. `계산된 필드 만들기`에서 `{FIXED [지역] : SUM([매출])}` 작성
    1. 필드 이름을 "지역별 매출"로 입력
    1. `지역별 매출` 필드 더블 클릭
    ```
    현재 차원인 `국가/지역`이 아니라 `지역`에 따라 계산되었음을 확인할 수 있음
    ```
- FIXED에서 설정한 차원이 <ins>뷰에 포함되어 있지 않을 때</ins>
    1. `매출` 필드를 마크 카드의 `텍스트`로, `지역` 필드를 행 선반으로 드래그
    1. `계산된 필드 만들기`에서 `{FIXED [범주] : SUM([매출])}` 작성
    1. 필드 이름을 "범주별 매출"로 입력
    1. `범주별 매출` 필드 더블 클릭
    ```
    뷰에 포함되지 않은 `범주`에 따라 계산되었음을 확인할 수 있음
    ```
- 제품별 매출 구성 비율(%)
    1. `범주` 필드를 행 선반으로 드래그
    1. 행 선반에서 `하위 범주` 필드 수준까지 펼침
    1. `매출` 필드 더블 클릭
    1. 마크 선반의 `매출` 필드 우클릭
    1. `퀵 테이블 계산`에서 `구성 비율` 선택
    1. `계산된 필드 만들기`에서 `{FIXED : SUM([매출])}` 작성
    ```
    LOD 표현식에서 차원을 입력하지 않으면 전체 데이터 기준에 따라 계산함
    ```
    1. 필드 이름을 "전체 매출"로 입력
    1. `전체 매출` 필드 더블 클릭
    1. `계산된 필드 만들기`에서 `SUM([매출]) / SUM([전체 매출])` 작성
    1. 필드 이름을 "제품 구성 비율"로 입력
    1. `제품 구성 비율` 필드 우클릭
    1. `기본 속성`의 `숫자 형식`에서 `백분율` 선택
    1. `제품 구성 비율` 필드 더블 클릭
    ```
    퀵 테이블 계산의 구성 비율과 FIXED 함수를 사용해 계산한 구성 비율이 동일함을 알 수 있음
    우측에서 하위 범주를 조정해 보면 FIXED 함수를 사용해 계산한 필드가 이를 반영함
    ```

## 40. LOD EXCLUDE

<!-- INCLUDE, EXCLUDE, FIXED 등 본 강의에서 알게 된 LOD 표현식에 대해 알게 된 점을 적고, 아래 두 질문에 답해보세요 :) -->

**이론**
- LOD(Level Of Detail): 뷰의 세부 수준
    - INCLUDE
    - EXCLUDE: 현재 뷰에서 <ins>특정 차원을 제외</ins>하여 계산
    - FIXED: 현재 뷰에 있는 차원과 상관없이 <ins>계산된 필드에서 원하는 차원</ins>을 따라 계산

**예시**
- 각 제품의 하위 범주에 따른 매출
    1. `범주` 필드를 행 선반으로 드래그
    1. 행 선반에서 `하위 범주` 필드 수준까지 펼침
    1. `매출` 필드 더블 클릭
    - FIXED
        1. `계산된 필드 만들기`에서 `{FIXED [범주]: SUM([매출])}` 작성
        1. 필드 이름을 "범주별 매출 (Fixed)"로 입력
    - EXCLUDE
        1. `계산된 필드 만들기`에서 `{EXCLUDE [하위 범주]: SUM([매출])}` 작성
        1. 필드 이름을 "범주별 매출 (Exclude)"로 입력
    1. `범주별 매출 (Fixed)` 필드와 `범주별 매출 (Exclude)` 필드 더블 클릭
    ```
    생성된 두 필드가 동일한 값을 반환하고 있는 것을 확인할 수 있음
    ```
- 하위 범주에 있는 제품 중 특정 제품 매출과 그외 제품 매출의 차이 비교
    1. `하위 범주` 필드를 행 선반으로, `매출` 필드를 열 선반으로 드래그
    1. `매출`을 내림차순으로 정렬
    1. `계산된 필드 만들기`에서 `IF [하위 범주] = "액세서리" THEN [매출] END` 작성
    1. 필드 이름을 "액세서리 매출"로 입력
    1. `액세서리 매출` 필드 더블 클릭
    1. `계산된 필드 만들기`에서 `{EXCLUDE [하위 범주]: SUM([액세서리 매출])}` 작성
    1. 필드 이름을 "EXCLUDE 하위 범주 매출"로 입력
    1. `EXCLUDE 하위 범주 매출` 필드 더블 클릭
    1. `계산된 필드 만들기`에서 `SUM([매출]) - ATTR([EXCLUDE 하위 범주 매출])` 작성
    1. 필드 이름을 "각 제품별 매출과 액세서리 매출의 차이"로 입력
    1. `각 제품별 매출과 액세서리 매출의 차이` 필드 더블 클릭
    1. 행 선반 위 `각 제품별 매출과 액세서리 매출의 차이` 필드를 마크 카드의 `색상`으로 복사

> **🧞‍♀ FIXED와 EXCLUDE를 사용하는 경우의 차이가 무엇인가요?**

```
<FIXED>
현재 뷰와 관계없이 특정 차원을 사용해 계산 -> 필터의 영향을 받지 않음
<EXCLUDE>
뷰에 있는 차원을 따라 계산 -> 관련 차원을 필터로 걸어보면 필터의 영향을 받음
특정 차원만 배제하는 것이므로 그보다 세부 수준이 더 낮은 것도 반영함
```

> **🧞‍♀ 왜 ATTR 함수를 사용하나요?**

```
ATTR 함수: Tableau에서 특정 필드가 시각화의 컨텍스트 내에서 여러 값을 가질 수 있는 경우, 단일 값을 반환하도록 보장하기 위해 사용
만약 필드가 컨텍스트 내에서 하나의 고윳값을 가지면 그 값을 반환하고, 여러 값을 가질 경우에는 *(별표)를 반환

즉, 여기서 ATTR([EXCLUDE 하위 범주 매출])을 사용한 이유는 시각화의 계산에서 이 필드가 단일 값을 가져야 하는 상황을 보장하기 위함임
ATTR을 사용하지 않고 SUM이나 다른 집계 함수를 사용할 경우, 특정 하위 범주에 대한 매출 값이 여러 개일 때 예기치 않은 집계가 발생할 수 있음
```

## 41. LOD INCLUDE

<!-- INCLUDE, EXCLUDE, FIXED 등 본 강의에서 알게 된 LOD 표현식에 대해 알게 된 점을 적고, 아래 두 질문에 답해보세요 :) -->

**이론**
- LOD(Level Of Detail): 뷰의 세부 수준
    - INCLUDE: 현재 뷰에서 <ins>특정 차원을 추가</ins>하여 계산
    - EXCLUDE: 현재 뷰에서 <ins>특정 차원을 제외</ins>하여 계산
    - FIXED: 현재 뷰에 있는 차원과 상관없이 <ins>계산된 필드에서 원하는 차원</ins>을 따라 계산

**예시**
- 각 도시의 고객당 평균 매출
    1. `국가/지역` 필드와 `주문 Id` 필드를 행 선반으로 드래그
    1. 행 선반에서 `시/도` 필드 수준까지 펼침
    1. `매출` 필드 더블 클릭
    1. 분석 패널에서 `총계` 더블 클릭
    1. `분석` 탭 클릭
    1. `총계`의 `총계 다음의 계산 표시`에서 `평균` 선택
    ```
    각 도시의 고객당 평균 매출을 나타내긴 하지만 따로 필드를 생성한 게 아님
    따라서 값을 재사용하기 위해 INCLUDE LOD 표현식을 사용해야 함
    ```
    1. 새 시트
    1. `계산된 필드 만들기`에서 `AVG({INCLUDE [주문 Id] : SUM([매출])})` 작성
    1. 필드 이름을 "주문 ID에 따른 평균 매출"로 입력
    1. `국가/지역` 필드를 행 선반으로 드래그
    1. 행 선반에서 `시/도` 필드 수준까지 펼침
    1. `주문 ID에 따른 평균 매출` 필드 더블 클릭

> **🧞‍♀ 그렇다면 어떤 경우에 각 표현식을 사용하나요? 예시와 함께 적어보아요**

```
<FIXED>
특정 필드를 기준으로 값을 고정, 필터의 영향을 받지 않음, 차원과 측정값을 모두 반환
e.g. 제품 범주의 총매출을 계산할 때 특정 범주를 고정

<INCLUDE>
추가적인 차원을 포함, 필터의 영향을 받음, 측정값만 반환
e.g. 각 도시와 제품 카테고리 조합의 매출 평균을 계산할 때, 뷰에 없는 도시 차원을 추가

<EXCLUDE>
특정 차원을 제외, 필터의 영향을 받음, 측정값만 반환
e.g. 각 제품 범주의 매출과 전체 하위 범주의 매출 차이를 계산할 때 제품 범주를 제외
```

## 42. 매개변수

<!-- 매개변수에 대해 알게 된 점을 적어주세요 -->

**개념**
- 매개변수
    - 고정된 상숫값이 아닌, <ins>동적인 값</ins>으로 변경하기 위해서 활용하는 기능
    - <ins>반드시 계산식, 필터, 참조선과 함께 사용됨</ins>

**실습**
- 매개변수를 만드는 방법
    - 첫 번째 방법
        1. 필터 생성
        1. 값을 입력하는 드롭다운 메뉴(`∨`)에서 `새 매개 변수 만들기` 클릭
    - 두 번째 방법
        1. 필드 우클릭
        1. `만들기`에서 `매개 변수` 클릭
    - 세 번째 방법
        1. 데이터 패널에서 `▼`모양 아이콘 클릭
        1. `매개 변수 만들기` 클릭
- 매개변수 조절
    1. 생성된 매개 변수 필드 우클릭
    1. `매개 변수 표시` 클릭
    1. 우측에서 유동적으로 값 조절 가능

> **🧞‍♀ 집합에도 매개변수를 적용할 수 있나요? 시도해 봅시다**

```
집합에도 매개변수를 적용할 수 있다.
```

<p align="center">
<img src="https://github.com/viola2002/dartb/blob/main/assignment/2024_Autumn/tableau/screenshots/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202024-11-05%20173948.png">
</p>

## 43. 매개변수 실습
<!-- 영상 묶음에 포함되지 않아 찾기 어려우실까 링크를 아래에 첨부하겠습니다. 수강 후 삭제해주세요-->

- 계산식 활용
    - 차원
        1. `매출` 필드를 열 선반으로, `국가` 필드를 행 선반으로 드래그
        1. 데이터 패널에서 `매개 변수 만들기` 클릭
        1. 이름을 "차원 선택하기"로 입력
        1. `데이터 유형`은 `문자열`, `허용 가능한 값`은 `목록` 선택
        1. 하단 목록에 "국가", "제품 제조사", "고객", "세그먼트" 입력
        1. `계산된 필드 만들기`에서 `CASE [차원 선택하기](\n)WHEN '국가' THEN [국가/지역](\n)WHEN '제품 제조사' THEN [제조업체](\n)WHEN '고객' THEN [고객 이름](\n)WHEN '세그먼트' THEN [세그먼트](\n)END` 작성
        1. 필드 이름을 "차원 선택"으로 입력
        1. `차원 선택` 필드를 행 선반으로 드래그
    - 측정값
        1. `매출` 필드를 열 선반으로, `국가` 필드를 행 선반으로 드래그
        1. 데이터 패널에서 `매개 변수 만들기` 클릭
        1. 이름을 "측정값 선택하기"로 입력
        1. `데이터 유형`은 `문자열`, `허용 가능한 값`은 `목록` 선택
        1. 하단 목록에 "매출", "수량", "수익" 입력
        1. `계산된 필드 만들기`에서 `CASE [측정값 선택하기](\n)WHEN '매출' THEN SUM([매출])(\n)WHEN '수량' THEN SUM([수량])(\n)WHEN '수익' THEN SUM([수익])(\n)END` 작성
        1. 필드 이름을 "측정값 선택"으로 입력
        1. `차원 선택` 필드를 행 선반으로 드래그
- 매개변수에 따른 제목 변경
    1. 시트 상단 제목 더블 클릭
    1. 작성된 제목 삭제
    1. `삽입` 옵션에서 `매개 변수.(매개 변수 이름)` 클릭
    1. 덧붙여서 텍스트 작성

## 44. 매개변수 실습

<!-- 매개변수에 대해 알게 된 점을 적어주세요 -->

- 참조선 활용
    - 예제 1
        1. `매출` 필드를 열 선반으로, `국가` 필드를 행 선반으로 드래그
        1. 분석 패널에서 `참조선`을 뷰로 드래그
        1. `라인`의 `값`에서 `새 매개 변수 만들기` 클릭
        1. 이름을 "목표 매출"로 입력
        1. `계산된 필드 만들기`에서 `IF SUM([매출]) >= [목표 매출](\n)THEN '목표 달성'(\n)ELSE '목표 미달성'(\n)END` 작성
        1. 필드 이름을 "KPI"로 입력
        1. `KPI` 필드를 마크 카드의 `색상`으로 드래그
    - 예제 2
        1. `매출` 필드를 행 선반으로 드래그
        1. `주문 날짜` 필드를 우클릭하여 열 선반으로 드래그
        1. *연속형* `월(주문 날짜)` 선택
        1. 데이터 패널에서 `매개 변수 만들기` 클릭
        1. 이름을 "시작 날짜"로 입력
        1. `데이터 유형`에서 `날짜` 선택
        1. `시작 날짜` 필드를 복제하여 `마지막 날짜` 필드 생성
        1. 분석 패널에서 `참조 구간`을 뷰의 `테이블 월(주문 날짜)`로 드래그
        1. `시작 구간`에 `시작 날짜` 매개변수, `끝 구간`에 `마지막 날짜` 매개변수 선택
        1. `라인`에서 첫 번째 옵션 선택
        1. `매개 변수 표시`
        1. `계산된 필드 만들기`에서 `TOTAL(SUM(IF [주문 날짜] >= [시작 날짜] AND [주문 날짜] <= [마지막 날짜] THEN [매출] END` 작성
        1. 필드 이름을 "날짜 범위의 매출 합계"로 입력
        1. `날짜 범위의 매출 합계` 필드를 마크 카드의 `세부 정보`로 드래그

## 45. 워크시트 마크카드

<!-- 마크카드에 대해 알게 된 점을 적어주세요 -->

**개념**
- 마크: 시트 안에 있는 데이터들
- 마크의 서식을 변경하려면 마크 카드 활용
    - 드롭다운 메뉴
        - 마크의 표현 방식 선택
    - 색상
        - 마크 색상, 투명도, 테두리 설정
        - 후광 옵션은 맵 차트에만 사용
    - 크기
        - 슬라이더를 움직여 마크 크기 조정
    - 레이블
        - 레이블 지정
        - 텍스트의 폰트, 색상, 크기, 방향, 위치 변경
        - 텍스트 표시 옵션 설정
    - 세부 정보
        - 불연속형 데이터 사용 -> 데이터를 구분하여 표시
        - 연속형 데이터 사용 -> 도구 설명에 데이터 추가
    - 도구 설명
        - 도구 설명 텍스트 수정
    - 경로 or 모양 등

## 46. 서식 계층

<!-- 서식계층에 대해 알게 된 점을 적어주세요 -->

> **🧞‍♀️ 서식계층을 일반적인 것에서 구체적인 것 순서로 기입해보세요**


```
여기에 답을 적어주세요!
```


## 47. 워크시트 서식

<!-- 워크시트 서식에 대해 알게 된 점을 적어주세요!-->



## 문제 리스트



## 문제 1.

```
가장 많이 주문한 사람들은 물건 배송을 빨리 받았을까요?
조건을 준수하여 아래 이미지를 만들어봅시다.
1) 국가/지역별(이하 '나라'로 통칭), 범주별로 배송일자가 다를 수 있으니 먼저, 나라별/범주별로 평균 배송일자를 설정한 뒤,
2) 각 나라에서 가장 많이 주문한 사람의 이름을 첫 번째 열,
3) 그 사람이 주문한 제품 이름을 2번째 열,
4) 각 상품이 배송까지 걸린 날 수를 표현하고
5) 그리고 만약 배송이 각 나라/범주별 평균보다 빨랐다면 '빠름', 같다면 '평균', 느리다면 '느림' 으로 print 해주세요.
```

![이미지주소](https://github.com/yousrchive/BUSINESS-INTELLIGENCE-TABLEAU/blob/main/study/img/2nd%20study/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202024-08-13%20%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB%2010.12.36.png?raw=true)

<!-- 여기까지 오는 과정 중 알게 된 점을 기입하고, 결과는 시트 명을 본인 이름으로 바꾸어 표시해주세요.-->

```
어려워요... 봐주세요...
```

## 문제 2.

```
채원이는 태블로를 쓰실 수 없는 상사분께 보고하기 위한 대시보드를 만들고 싶어요.

제품 중분류별로 구분하되 매개변수로써 수익, 매출, 수량을 입력하면 저절로 각각 지표에 해당하는 그래프로 바뀌도록 설계하고자 해요.

어떤 값이 각 지표의 평균보다 낮은 값을 갖고 있다면 색깔을 주황색으로, 그것보다 높다면 파란색으로 표시하고 싶어요. 그 평균값은 각 지표별로 달라야 해요.
```

<!-- 예시 사진은 지워주세요-->

<p align="center">
<img src="https://github.com/viola2002/dartb/blob/main/assignment/2024_Autumn/tableau/screenshots/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202024-11-05%20235738.png">
</p>